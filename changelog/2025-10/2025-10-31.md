# Changelog - October 31, 2025

## ğŸ”§ Developer Experience

### Data Management Enhancements
- **Added `--purge-data` command to qop.py**: Standalone data purging with safety confirmations
  - Requires typing "yes" to confirm (double confirmation with seed_data.py)
  - `--skip-confirm` flag for automation/CI/CD
  - Purges all tables: accounts, resources, policies, findings, summary cache
  - Shows count of deleted items per table
  - Usage: `./qop.py --purge-data --region us-east-1 --profile qop`

- **Enhanced seed_data.py with purge functionality**
  - New `--purge` flag for standalone purging
  - Improved `purge_tables()` function with detailed output
  - Backward compatible with existing `--clear` flag
  - Usage: `python seed_data.py --purge --region us-east-1`

## ğŸ› Bug Fixes

### Inventory View UI Fixes
- **Fixed resource type capitalization**: Resource types now display as "S3", "EC2", "IAM" instead of lowercase
- **Fixed resource type filtering**: Selecting a resource type now correctly resets pagination to page 1
- **Added table padding**: Improved visual spacing in inventory table headers and cells

## ğŸ”„ Maintenance

### Inventory Filtering and Validation
- **Added supported services filtering in inventory_manager.py**
  - `_compute_resources_summary()`: Only includes supported services (s3, ec2, iam) in summary
  - `get_resources_paginated()`: Validates requested service type and filters results
  - Logs errors when unsupported services are encountered
  - Returns empty results for unsupported services instead of errors

- **Created comprehensive test suite**: `test_inventory_handlers.py`
  - Verifies all supported services have handler modules
  - Tests unsupported service error handling
  - Validates SUPPORTED_SERVICES list integrity (no duplicates, lowercase, not empty)
  - All 97 tests passing with 80.65% coverage

### Error Logging Examples
```
ERROR: Found unsupported service types in inventory: ['rds', 'lambda']
Supported services: ['s3', 'ec2', 'iam']
```

## ğŸ“š Documentation Updates

- Updated help text in qop.py with data management examples
- Added quick reference for data purge operations
- Documented safety features and confirmation requirements

## Technical Details

### Files Modified
1. `qop.py` - Added `purge_data()` method and `--purge-data` command
2. `tools/data/seed_data.py` - Enhanced with `purge_tables()` and `--purge` flag
3. `qrie-ui/components/inventory-view.tsx` - Fixed capitalization and pagination reset
4. `qrie-infra/lambda/data_access/inventory_manager.py` - Added service filtering and validation
5. `qrie-infra/tests/unit/test_inventory_handlers.py` - New test suite (5 tests)

### Test Results
```
âœ… 97 passed in 8.80s
ğŸ“Š Coverage: 80.65% (exceeds 80% requirement)
```
